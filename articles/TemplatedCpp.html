<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Templated Cpp • FIMSTraining</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Templated Cpp">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">FIMSTraining</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>

  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fas fa-file-contract fa-lg"></span>

    Vignettes

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/GettingToKnowCpp.html">Getting to Know C++</a>
    </li>
    <li>
      <a href="../articles/IntroRcpp.html">Intro to Rcpp</a>
    </li>
    <li>
      <a href="../articles/CppMemory.html">C++ Memory Management</a>
    </li>
    <li>
      <a href="../articles/TemplatedCpp">Templated C++</a>
    </li>
    <li>
      <a href="../articles/CppClassStructure">C++ Class Structure</a>
    </li>
    <li>
      <a href="../articles/CppInheritance">C++ Inheritance</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://github.com/NOAA-FIMS/FIMS_Training/issues" class="external-link">
    <span class="fas fa-question-circle fa-lg"></span>

    Issues
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/NOAA-FIMS/FIMS_Training" class="external-link">
    <span class="fab fa-github fa-lg"></span>

    Source Code
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Templated Cpp</h1>
                        <h4 data-toc-skip class="author">Andrea
Havron</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/NOAA-FIMS/FIMS_training/blob/main/vignettes/TemplatedCpp.Rmd" class="external-link"><code>vignettes/TemplatedCpp.Rmd</code></a></small>
      <div class="hidden name"><code>TemplatedCpp.Rmd</code></div>

    </div>

    
    
<p>Because C++ is a strongly typed language, every function must be
declared with a specific types, e.g. <code>int</code>,
<code>float</code>, <code>double</code>, etc.</p>
<p>It can be repetitive to write out one function that accepts multiple
types. For example, in <a href="https://noaa-fims.github.io/FIMS_training/articles/GettingToKnowCpp.html#simple-addition-program" class="external-link">Getting
to Know C++</a> vignette, we specified two separate functions for adding
integers and doubles:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="dt">int</span> add<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>  x <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>  y <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>  <span class="cf">return</span> x <span class="op">+</span> y<span class="op">;</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="dt">double</span> add<span class="op">(</span><span class="dt">double</span> x<span class="op">,</span> <span class="dt">double</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>  x <span class="op">=</span> <span class="fl">1.2</span><span class="op">;</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>  y <span class="op">=</span> <span class="fl">2.4</span><span class="op">;</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>  <span class="cf">return</span> x <span class="op">+</span> y<span class="op">;</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>A separate function is needed for each type we want to be able to
return. This can get tedious and repetitive, and can also lead to more
code to maintain and more potential for bugs. To simplify matters, C++
allows for templated code, which allows for a generic type.</p>
<div class="section level2">
<h2 id="templates">Templates<a class="anchor" aria-label="anchor" href="#templates"></a>
</h2>
<ul>
<li>Can be defined using <strong>template</strong> along with
<strong>typename</strong> or <strong>class</strong>
</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> A<span class="op">&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="kw">template</span> <span class="op">&lt;</span><span class="kw">class</span> A<span class="op">&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co">//FIMS uses Type as the typename or class:</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="kw">template</span> <span class="op">&lt;</span><span class="kw">class</span> Type<span class="op">&gt;</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>Type my_add<span class="op">(</span>Type x<span class="op">,</span> Type y<span class="op">){</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>  <span class="cf">return</span> x <span class="op">+</span> y</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Now when we run the program, we can use the function,
<code>my_add</code> with different data types:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="kw">template</span> <span class="op">&lt;</span><span class="kw">typename</span> Type<span class="op">&gt;</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>Type my_add<span class="op">(</span>Type x<span class="op">,</span> Type y<span class="op">){</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>  <span class="cf">return</span> x <span class="op">+</span> y<span class="op">;</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(){</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>  <span class="co">//works with integers</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>  <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">"Type is int: "</span> <span class="op">&lt;&lt;</span> my_add<span class="op">(</span><span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a>  </span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a>  <span class="co">//works with floats</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>  <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">"Type is float: "</span> <span class="op">&lt;&lt;</span> my_add<span class="op">(</span><span class="fl">1.2</span><span class="op">,</span> <span class="fl">3.2</span><span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a>  </span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a>  <span class="co">//works with doubles</span></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a>  <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">"Type is double: "</span> <span class="op">&lt;&lt;</span> my_add<span class="op">(</span><span class="fl">1.52757396774</span><span class="op">,</span> <span class="fl">6.83480375227</span><span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="bu">std::</span>endl<span class="op">;</span></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a>  </span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a>  <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a>  </span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Rcpp does not support C++ templating so this example can be run from
your command prompt.</p>
<ul>
<li>You will need to navigate to the directory where the .cpp file lives
(<code>src/my_templated_add.cpp</code>)</li>
<li>You will need a C++ compiler installed and on your path (<a href="https://noaa-fims.github.io/collaborative_workflow/developer-software-and-installation-guide.html#c-compiler" class="external-link">see
instructions here</a>).</li>
<li>The following uses gcc installed for Windows users using
rtools4.</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>cd local_path<span class="sc">/</span>FIMS_training<span class="sc">/</span>src</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>g<span class="sc">++</span> my_templated_add.cpp <span class="sc">-</span>o a.exe</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>a.exe</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>Type is int<span class="sc">:</span> <span class="dv">3</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>Type <span class="cf">in</span> float<span class="sc">:</span> <span class="fl">4.4</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>Type is double<span class="sc">:</span> <span class="fl">8.36238</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Andrea Havron, Christine Stawitz.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
